$(document).ready(function (){    function loadBranches() {        $.ajax({            url: '../controller/ProductController.php',            type: 'GET',            data: {action: 'GetBranch'},            dataType: 'json',            success: function (res) {                // Empty the dropdown first                $('#choice_branch').empty();                // Append each branch as an option                res.forEach((branch) => {                    $('#choice_branch').append(`                    <option value="${branch[1]}">${branch[1]}</option>                `);                });            }        });    }                $(document).on('submit','#form_user',function (e){        e.preventDefault()        const formData = new FormData(this)        formData.append('action','create')            $.ajax({                url:'../controller/UserController.php',                data: formData,                type: 'POST',                data: formData,                contentType: false,                processData: false,                dataType: 'json',                success: function (data) {                    if (data.error) {                        // Loop through the errors and show them one by one                        $.each(data.error, function (field, message) {                            Swal.fire({                                text: message,  // Display the error message                                confirmButtonColor: '#4361ee',                                iconColor: '#ff6347',                                icon: 'warning',                                toast: true,                                target: 'body',                                position: 'top-end',                                showConfirmButton: false,                                timer: 2000,  // Auto-close the alert after 2 seconds                                timerProgressBar: true,  // Show the progress bar for the timer                            });                        });                    }else {                        Swal.fire({                            text: data.message,                            icon: "success",                            confirmButtonColor: '#4361ee',                            iconColor: '#4361ee'                        });                        $('#modal_create_branch').modal('hide');                        setTimeout(() => {                            window.location.reload();                        }, 2000);                    }                }            })    })    $(document).on('click','#updteUser',function (e){        $.ajax({            url:'../controller/UserController.php',            type: 'POST',            data:{                id: e.target.value,                action: 'Update'            },            success: function (data){                // $('#modal_container').append(data)                if ($('#modal_update_user').length === 0) {                    $('body').append(data);                } else {                    $('#modal_update_user').replaceWith(data)                }                $('#modal_update_user').modal('show')            }        })    })    $(document).on('submit', '#form_user', function(event) {        event.preventDefault();        const formData = new FormData(this)        formData.append('action', 'SaveUser')        $.ajax({            url:'../controller/UserController.php',            type: 'POST',            data: formData,            contentType: false,            processData: false,            dataType: 'json',            success: function (data){              if (data.success === true){                  Swal.fire({                      text: data.message,                      icon: "success",                      confirmButtonColor: '#4361ee',                      iconColor: '#4361ee'                  });                  $('#modal_update_user').modal('hide');                  setTimeout(() => {                      window.location.reload();                  }, 2000);              }else {                  Swal.fire({                      text: data.message,                      icon: "error",                      confirmButtonColor: '#4361ee',                      iconColor: '#4361ee'                  });              }            }        })    });$(document).on('click','#ArchiveUser',function (e){    Swal.fire({        title: "Are you sure?",        text: "You won't be able to revert this!",        icon: "warning",        showCancelButton: true,        confirmButtonColor: '#4361ee',        cancelButtonColor: "#d33",        confirmButtonText: "Yes, delete it!"    }).then((result) => {        if (result.isConfirmed) {         // ajax request            $.ajax({                url:'../controller/UserController.php',                type: 'POST',                data:{                    id: e.target.value,                    action: 'ArchiveUser'                },                dataType: 'json',                success: function (data){                    if (data.success === true){                        Swal.fire({                            text: data.message,                            icon: "success",                            confirmButtonColor: '#4361ee',                            iconColor: '#4361ee'                        });                        $('#modal_update_user').modal('hide');                        setTimeout(() => {                            window.location.reload();                        }, 2000);                    }                }            })        }    });})    loadBranches()})