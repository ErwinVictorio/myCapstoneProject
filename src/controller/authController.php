<?phpnamespace controller;use model\authModel;include_once '../model/authModel.php';class authController{  public  function AdminLogin()  {       $username = $_POST['username'];       $password = $_POST['password'];       $data = [];       $error = [];       if (empty($username)){           $error['username'] = 'Please enter your username to proceed.';       }       if (empty($password)){           $error['password'] = 'Please enter your password to proceed.';       }       if (!empty($error)){           $data[''] = false;           $data['error'] = $error;           echo json_encode($data);       }else{           $auth = new authModel();           $auth->adminLogin($username,$password);       }  }  public function employeeLogin()  {      $username = htmlspecialchars($_POST['username']);      $password = htmlspecialchars($_POST['password']);      $employee = new authModel();      if (empty($username) && empty($password)){        echo  json_encode(['success' => false, 'message' => 'please provide username and password']);      }else{          $employee->employeeLogin($password,$username);      }  }public function storeNewAdminAccount(){    $fields = [      'NewUsername' => 'Username is Required',       'Newfullname' => 'Fullname is Required',        'NewPassword' => 'Password is Required'    ];    $data = [];    $error = [];    foreach ($fields as $field => $message){        if (!isset($_POST[$field]) || trim($_POST[$field]) == ''){           $error[$field] = $message;        }else{            $data[$field] = htmlspecialchars($_POST[$field]);        }    }    if(!empty($error)){        $data['success'] = false;        $data['errors'] = $error;        echo json_encode($data);        return;    }    $newAccount = new authModel();    $usernameExist = new  authModel();    $username = $usernameExist->showAdminCredential($data['NewUsername']);    if ($username){        echo  json_encode(['success' => false, 'message' => 'Username: '.$data['NewUsername'].' is Already Exist']);        return;    }    $newAccount->storeAdminCredential($data['Newfullname'],$data['NewUsername'],$data['NewPassword']);}public function showCredential($username){  $admin = new authModel(); $dataRow = $admin->showAdminCredential($username); $div = ''; if ($dataRow){     foreach ($dataRow as $row){         $div .='              <div class="form-floating mb-3">             <input name="updateUserName" value="'.$row['username'].'" type="text" class="form-control" id="updateUserName" placeholder="New Username">             <label for="updateUserName">New Username</label>         </div>         <div class="form-floating mb-3">             <input name="updatedPassword" type="password" class="form-control" id="updatedPassword" placeholder="New Password">             <label for="updatedPassword">New Password</label>         </div>        <div class="form-floating mb-3">          <input name="confirm_pass" type="password" class="form-control" id="ConfirmPassword2" placeholder="Confirm Password">           <label for="ConfirmPassword2">Confirm Password</label>            <div id="ConfirmPassword2_msg" class="invalid-feedback"></div>          </div>         <input type="hidden" name="currentPassword"  value="'.$row['password'].'"">          <input type="hidden" name="currentUsername"  value="'.$row['username'].'"">         <input type="hidden" name="adminId"  value="'.$row['adminId'].'"">         ';     }  echo $div; } return [];}public function saveChanges(){      $username = htmlspecialchars($_POST['updateUserName']);      $password = htmlspecialchars($_POST['updatedPassword']);      $currentPassword = htmlspecialchars($_POST['currentPassword']);      $adminId = htmlspecialchars($_POST['adminId']);      $passwordHashed = password_hash($password,PASSWORD_BCRYPT);      $model = new authModel();      if(empty($username)){          echo json_encode(['success' => false, 'message' => 'username is required']);          return;      }      if (empty($password)){         $model->SaveUpdateCredential($username,$currentPassword,$adminId);         return;      }    $model->SaveUpdateCredential($username,$passwordHashed,$adminId);}}if ($_SERVER['REQUEST_METHOD'] === 'POST' && $_POST['action']){    $controller = new authController();    switch ($_POST['action']){        case 'adminLogin':           $controller->AdminLogin();            break;        case 'employeeLogin':            $controller->employeeLogin();            break;        case 'createNewAccount':            $controller->storeNewAdminAccount();            break;        case 'SaveChanges':            $controller->saveChanges();            break;    }}