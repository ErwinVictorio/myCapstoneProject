<?phpnamespace model;use config\DbConnection;include_once '../config/DbConnection.php';class UserModel extends DbConnection{    public $Status = 'Active';    public $status_Active = 'Active';    public $StatusDel = 'is_deleted';    public function DisplayUser()    {        $query = 'select * from employee where status = ?';        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('s',$this->Status);        $stmt->execute();        $result = $stmt->get_result();        $tr = '';        while ($row = $result->fetch_assoc()){            $tr .= '            <tr>            <th scope="row">'.$row['id'].'</th>            <td>'.$row['username'].'</td>            <td>'.$row['Branch'].'</td>            <td>            <button value="'.$row['id'].'" id="updteUser" class="btn btn-primary">            Update            </button>            <button value="'.$row['id'].'" id="ArchiveUser" class="btn btn-danger">            Archive            </button>           </td>                 </tr>            ';        }        echo $tr;    }    public function CreateUserCredentials($username,$password,$branch)    {        $query = "insert into employee(username, password, Branch, status) VALUES (?,?,?,?)";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('ssss',$username,$password,$branch,$this->status_Active);        if ($stmt->execute()){            echo json_encode(['success' => true, 'message' => 'New User is Successfully Created']);        }else{            echo json_encode(['success' => false, 'message' => 'Failed','error' => $stmt->error]);        }    }    public function UpdateUser($id)    {        $query = 'select * from employee where id = ?';        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('i',$id);        $stmt->execute();        $result = $stmt->get_result();        $data = '';        while ($row = $result->fetch_assoc()){            $data .= '            <div class="modal fade" id="modal_update_user" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">            <div class="modal-dialog modal-dialog-centered modal-md">        <div class="modal-content">            <div class="modal-header">                <h1 class="modal-title fs-5 text-muted" id="exampleModalLabel">UPDATE USER CREDENTIAL</h1>                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>            </div>            <form id="form_user" action="../controller/UserController.php" method="post" class="modal-body d-flex flex-column gap-2">                <div class="d-flex gap-5">                    <div class="input-group mb-3">                                <span class="input-group-text" id="addon-wrapping">                           <i class="fa-solid fa-user"></i>                                </span>                        <input id="username" value="'.$row['username'].'" name="SaveUsername" type="text" class="form-control" placeholder="Create New UserName" aria-label="BranchName" aria-describedby="addon-wrapping">                        <input name="id" type="hidden" value="'.$row['id'].'">                    </div>                </div>                <div class="d-flex gap-5">                    <div class="input-group mb-3">                                <span class="input-group-text" id="addon-wrapping">                                 <i class="fa-solid fa-lock"></i>                                </span>                        <input id="password" name="SavePassword" type="password" class="form-control" placeholder="Create New Password" aria-label="Password" aria-describedby="addon-wrapping">                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>                    <button style="background-color: #4361ee" type="submit" class="btn text-light">                        <i class="fa-solid fa-plus"></i>                        Save                    </button>                </div>            </form>        </div>    </div>            ';        }        echo $data;    }    // Save the updated user credentials    public function SaveUser($password,$username,$id)    {        $query = "update employee set username = ? , password = ? where id = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('ssi',$password,$username,$id);        if ($stmt->execute()){            echo json_encode(['success' => true , 'message' => 'Successfully Updated']);        }else{            echo json_encode(['success' => false , 'message' => 'Failed' , 'error' => $stmt->error]);        }    } public function SaveUserNameId($username,$id)    {        $query = "update employee set username = ?  where id = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('si',$username,$id);        if ($stmt->execute()){            echo json_encode(['success' => true , 'message' => 'Successfully Updated']);        }else{            echo json_encode(['success' => false , 'message' => 'Failed' , 'error' => $stmt->error]);        }    }    public function ArchiveUser($id)    {        $query = "update employee set status = ? where id = ?";        $stamt = $this->Connect()->prepare($query);        $stamt->bind_param('si',$this->StatusDel,$id);        if ($stamt->execute()){            echo json_encode(['success' => true , 'message' => 'Successfully Deleted']);        }else{            echo json_encode(['success' => false , 'message' => 'Failed' , 'error' => $stmt->error]);        }    }    public function DisplaySum()    {        $result = $this->Connect()->query("SELECT COUNT(*) AS TotalUser From employee");        $con = '';        while ($employee = $result->fetch_assoc()){            $con .= '            <h3 class="fw-bold"  style="color:#ffffff;">'.number_format($employee['TotalUser']).'</h3>          ';        }        echo $con;    }}